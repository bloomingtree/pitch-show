{
  "info": {
    "name": "Auth Server API",
    "description": "统一认证中心 API 接口文档",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Auth - 认证相关",
      "item": [
        {
          "name": "发送登录邮件 (POST /v1/auth/email)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "x-app-identifier",
                "value": "kink",
                "description": "应用标识符: kink 或 shiyin"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"test@example.com\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/v1/auth/email",
              "host": ["{{baseUrl}}"],
              "path": ["v1", "auth", "email"]
            },
            "description": "发送登录邮件到用户邮箱，用于邮件 OTP 登录/注册"
          },
          "response": []
        },
        {
          "name": "验证邮箱 OTP (POST /v1/auth/verify-email)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "x-app-identifier",
                "value": "kink"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"test@example.com\",\n  \"token\": \"123456\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/v1/auth/verify-email",
              "host": ["{{baseUrl}}"],
              "path": ["v1", "auth", "verify-email"]
            },
            "description": "验证邮箱 OTP 码，完成登录/注册流程，成功后返回 session 和 user 信息"
          },
          "response": []
        },
        {
          "name": "获取当前用户信息 (GET /v1/auth/me)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}",
                "description": "从 verify-email 或 ios 接口获取的 access_token"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/v1/auth/me",
              "host": ["{{baseUrl}}"],
              "path": ["v1", "auth", "me"]
            },
            "description": "获取当前登录用户的信息，需要有效的 access_token"
          },
          "response": []
        },
        {
          "name": "刷新会话 (POST /v1/auth/refresh)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"refreshToken\": \"your-refresh-token-here\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/v1/auth/refresh",
              "host": ["{{baseUrl}}"],
              "path": ["v1", "auth", "refresh"]
            },
            "description": "使用 refresh_token 刷新会话，获取新的 access_token"
          },
          "response": []
        },
        {
          "name": "iOS Apple 登录 (POST /v1/auth/ios)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "x-app-identifier",
                "value": "kink"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"identityToken\": \"your-apple-identity-token\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/v1/auth/ios",
              "host": ["{{baseUrl}}"],
              "path": ["v1", "auth", "ios"]
            },
            "description": "使用 Apple Sign In 的 identityToken 进行 iOS 登录，需要 iOS 客户端获取 identityToken"
          },
          "response": []
        },
        {
          "name": "删除账户 (DELETE /v1/auth/account)",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              },
              {
                "key": "x-app-identifier",
                "value": "kink"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/v1/auth/account",
              "host": ["{{baseUrl}}"],
              "path": ["v1", "auth", "account"]
            },
            "description": "删除当前用户的账户和相关数据，此操作不可逆"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Profile - 用户资料",
      "item": [
        {
          "name": "获取当前用户资料 (GET /v1/profile)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/v1/profile",
              "host": ["{{baseUrl}}"],
              "path": ["v1", "profile"]
            },
            "description": "获取当前登录用户的资料信息"
          },
          "response": []
        },
        {
          "name": "更新用户资料 (PUT /v1/profile)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{accessToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"username\": \"new_username\",\n  \"avatar_url\": \"https://example.com/avatar.png\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/v1/profile",
              "host": ["{{baseUrl}}"],
              "path": ["v1", "profile"]
            },
            "description": "更新当前用户的资料信息（用户名、头像等）"
          },
          "response": []
        }
      ]
    }
  ],
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:9271",
      "type": "string"
    },
    {
      "key": "accessToken",
      "value": "",
      "type": "string",
      "description": "从登录接口获取的 access_token"
    }
  ]
}
